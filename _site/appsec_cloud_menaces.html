<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="Les menaces du Cloud">
<meta name="keywords" content="cloud,  cloud, menaces">
<title>Les menaces du Cloud | AppSec HiTeMa</title>
<link rel="stylesheet" href="css/syntax.css">

<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
<!--<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">-->
<link rel="stylesheet" href="css/modern-business.css">
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<link rel="stylesheet" href="css/customstyles.css">
<link rel="stylesheet" href="css/boxshadowproperties.css">
<!-- most color styles are extracted out to here -->
<link rel="stylesheet" href="css/theme-blue.css">

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="js/jquery.navgoco.min.js"></script>


<!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<!-- Anchor.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/2.0.0/anchor.min.js"></script>
<script src="js/toc.js"></script>
<script src="js/customscripts.js"></script>

<link rel="shortcut icon" href="images/favicon.ico">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->

<link rel="alternate" type="application/rss+xml" title="appsec-hitema" href="http://localhost:4000/feed.xml">

    <script>
        $(document).ready(function() {
            // Initialize navgoco with default options
            $("#mysidebar").navgoco({
                caretHtml: '',
                accordion: true,
                openClass: 'active', // open
                save: false, // leave false or nav highlighting doesn't work right
                cookie: {
                    name: 'navgoco',
                    expires: false,
                    path: '/'
                },
                slide: {
                    duration: 400,
                    easing: 'swing'
                }
            });

            $("#collapseAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', false);
            });

            $("#expandAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', true);
            });

        });

    </script>
    <script>
        $(function () {
            $('[data-toggle="tooltip"]').tooltip()
        })
    </script>
    <script>
        $(document).ready(function() {
            $("#tg-sb-link").click(function() {
                $("#tg-sb-sidebar").toggle();
                $("#tg-sb-content").toggleClass('col-md-9');
                $("#tg-sb-content").toggleClass('col-md-12');
                $("#tg-sb-icon").toggleClass('fa-toggle-on');
                $("#tg-sb-icon").toggleClass('fa-toggle-off');
            });
        });
    </script>
    

</head>
<body>
<!-- Navigation -->
<nav class="navbar navbar-inverse navbar-static-top">
    <div class="container topnavlinks">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="fa fa-home fa-lg navbar-brand" href="index.html">&nbsp;<span class="projectTitle"> AppSec HiTeMa</span></a>
        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <!-- toggle sidebar button -->
                <li><a id="tg-sb-link" href="#"><i id="tg-sb-icon" class="fa fa-toggle-on"></i> Nav</a></li>
                <!-- entries without drop-downs appear here -->




                
                
                
                <li><a href="https://www.hitema.fr" target="_blank">Hitema</a></li>
                
                
                
                <li class="active"><a href="appsec">AppSec-Hitema</a></li>
                
                
                
                <!-- entries with drop-downs appear here -->
                <!-- conditional logic to control which topnav appears for the audience defined in the configuration file.-->
                
                
			<li>



  <a class="email" title="Submit feedback" href="#" onclick="javascript:window.location='mailto:yvan.phelizot@arolla.fr?subject=AppSec - HiTeMa feedback&body=I have some feedback about the Les menaces du Cloud page: ' + window.location.href;"><i class="fa fa-envelope-o"></i> Feedback</a>

</li>

		
                <!--comment out this block if you want to hide search-->
                <li>
                    <!--start search-->
                    <div id="search-demo-container">
                        <input type="text" id="search-input" placeholder="search...">
                        <ul id="results-container"></ul>
                    </div>
                    <script src="js/jekyll-search.js" type="text/javascript"></script>
                    <script type="text/javascript">
                            SimpleJekyllSearch.init({
                                searchInput: document.getElementById('search-input'),
                                resultsContainer: document.getElementById('results-container'),
                                dataSource: 'search.json',
                                searchResultTemplate: '<li><a href="{url}" title="Les menaces du Cloud">{title}</a></li>',
                    noResultsText: 'No results found.',
                            limit: 10,
                            fuzzy: true,
                    })
                    </script>
                    <!--end search-->
                </li>
            </ul>
        </div>
        </div>
        <!-- /.container -->
</nav>

<!-- Page Content -->
<div class="container">
  <div id="main">
    <!-- Content Row -->
    <div class="row">
        
        
            <!-- Sidebar Column -->
            <div class="col-md-3" id="tg-sb-sidebar">
                

<ul id="mysidebar" class="nav">
  <li class="sidebarTitle">appsec-hitema 0.1</li>
  
  
  
      
  
  <li>
      <a href="#">Introduction</a>
      <ul>
          
          
          
          <li><a href="appsec_intro_index.html">Quelques exemples</a></li>
          
          
          
          
          
          
          <li><a href="appsec_intro_definition.html">Définitions</a></li>
          
          
          
          
          
          
          <li><a href="appsec_intro_objectifs.html">Objectifs de la sécurité</a></li>
          
          
          
          
          
          
          <li><a href="appsec_threat_and_risk.html">Menaces et gestion du risque</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a href="#">Cloud</a>
      <ul>
          
          
          
          <li><a href="appsec_cloud_definitions.html">Le Cloud?</a></li>
          
          
          
          
          
          
          <li><a href="appsec_cloud_menaces.html">Les menaces du Cloud</a></li>
          
          
          
          
          
          
          <li><a href="appsec_cloud_opportunites.html">Le Cloud, nouvelles opportunités</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a href="#">Architecture</a>
      <ul>
          
          
          
          <li><a href="appsec_archi_rappels.html">Quelques rappels</a></li>
          
          
          
          
          
          
          <li><a href="appsec_archi_principles.html">Principes</a></li>
          
          
          
          
          
          
          <li><a href="appsec_archi_technical.html">Architecture technique</a></li>
          
          
          
          
          
          
          <li><a href="appsec_archi_software.html">Architecture logicielle</a></li>
          
          
          
          
          
          
          <li><a href="appsec_archi_fonctionnal.html">Architecture fonctionnelle</a></li>
          
          
          
          
          
          
          <li><a href="appsec_archi_design.html">Modélisation appliquée à la sécurité</a></li>
          
          
          
          
          
          
          <li><a href="appsec_archi_security.html">Cloud et sécurité</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a href="#">AppSec Web</a>
      <ul>
          
          
          
          <li><a href="appsec_web_rappels.html">Rappels sur le web</a></li>
          
          
          
          
          
          
          <li><a href="appsec_web_top10_owasp.html">Top 10 OWASP WEB</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a href="#">AppSec Mobile</a>
      <ul>
          
          
          
          <li><a href="appsec_mobile_rappels.html">Rappels et Contexte</a></li>
          
          
          
          
          
          
          <li><a href="appsec_mobile_best_practices.html">Bonnes pratiques</a></li>
          
          
          
          
          
          
          <li><a href="appsec_mobile_top10.html">Top 10 OWASP Mobile</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a href="#">Développement sécurisé</a>
      <ul>
          
          
          
          <li><a href="appsec_secure_coding.html">Secure Coding</a></li>
          
          
          
          
          
          
          <li><a href="appsec_secure_quality.html">Qualité logicielle et sécurité</a></li>
          
          
          
          
          
          
          <li><a href="appsec_secure_devsecops.html">DevSecOps</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a href="#">Cycle de développement sécurisé</a>
      <ul>
          
          
          
          <li><a href="appsec_sdlc_rappels.html">Rappels (Cycle en V, méthodes Agile)</a></li>
          
          
          
          
          
          
          <li><a href="appsec_sdlc_microsoft.html">Microsoft SDLC</a></li>
          
          
          
          
          
          
          <li><a href="appsec_sdlc_samm.html">OWASP SAMM</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a href="#">Ressources</a>
      <ul>
          
          
          
          <li><a href="appsec_ressources.html">Ressources</a></li>
          
          
          
          
          
          
          <li><a href="appsec_support.html">Supports de cours</a></li>
          
          
          
          
          
          
          <li><a href="appsec_syllabus.html">Syllabus</a></li>
          
          
          
          
      </ul>
   </li>
     
      
      
      <!-- if you aren't using the accordion, uncomment this block:
         <p class="external">
             <a href="#" id="collapseAll">Collapse All</a> | <a href="#" id="expandAll">Expand All</a>
         </p>
         -->
</ul>

<!-- this highlights the active parent class in the navgoco sidebar. this is critical so that the parent expands when you're viewing a page. This must appear below the sidebar code above. Otherwise, if placed inside customscripts.js, the script runs before the sidebar code runs and the class never gets inserted.-->
<script>$("li.active").parents('li').toggleClass("active");</script>

            </div>
            
        

        <!-- Content Column -->
        <div class="col-md-9" id="tg-sb-content">
            <div class="post-header">
   <h1 class="post-title-main">Les menaces du Cloud</h1>
</div>



<div class="post-content">

   
    <div class="summary">Les menaces du Cloud</div>
   

    
    
<!-- this handles the automatic toc. use ## for subheads to auto-generate the on-page minitoc. if you use html tags, you must supply an ID for the heading element in order for it to appear in the minitoc. -->
<script>
$( document ).ready(function() {
  // Handler for .ready() called.

$('#toc').toc({ minimumHeaders: 0, listType: 'ul', showSpeed: 0, headers: 'h2,h3,h4' });

/* this offset helps account for the space taken up by the floating toolbar. */
$('#toc').on('click', 'a', function() {
  var target = $(this.getAttribute('href'))
    , scroll_target = target.offset().top

  $(window).scrollTop(scroll_target - 10);
  return false
})
  
});
</script>

<div id="toc"></div>

    


    

    <a target="_blank" href="https://github.com/github.com/cotonne/appsec-hitemapages/appsec/appsec_cloud_menaces.md" class="btn btn-default githubEditButton" role="button"><i class="fa fa-github fa-lg"></i> Edit me</a>

    

   <p>Le Cloud est un nouvel outil puissant. C’est un allié dans la réussite de nombreux projets métier.
Pour de nombreuses entreprises, il s’agit d’un outil indispensable. Cependant, ce n’est pas un outil 
sans risques.</p>

<p>Il convient ainsi de déterminer les menaces existantes pour un tel outil. Il est aussi nécessaire de
voir comment le Cloud s’insère dans les politiques existantes et les évolutions qu’il provoque sur 
la gouvernance et les processus. La question se pose aussi sur la mise en oeuvre d’une application
dans le Cloud, notamment pour définir une architecture qui épouse le Cloud tout en garantissant la 
sécurité.</p>

<h1 id="risques-de-sécurité">Risques de sécurité</h1>

<p>Des risques ont été identifiés quant à l’usage du Cloud. Nous verrons deux grandes listes qui 
servent de base lors d’une analyse de risque d’une application Cloud.</p>

<h2 id="owasp-cloud-top-10-2017">OWASP Cloud Top 10 2017</h2>

<p>OWASP propose un <a href="https://www.owasp.org/index.php/Category:OWASP_Cloud_%E2%80%90_10_Project">Top 10</a>
pour le Cloud.</p>

<ol>
  <li>R1 - Accountability and Data Ownership</li>
</ol>

<p>Le risque porte sur le contrôle de la donnée. Le fournisseur a la possibilité de lire les données 
non chiffrées (Confidentialité), modifier (Intégrité) voire d’en interdire l’accès en cas de conflit.
Le choix du Cloud publique pose une réelle question quant à la souverainté. De plus, la sécurité des
données est transférée en grande partie au fournisseur. Il convient de s’assurer de la mise en oeuvre
de bonnes pratiques via des certifications exposées, par exemple.</p>

<p>Plusieurs solutions sont possibles:</p>
<ul>
  <li>Mettre en oeuvre un Cloud privé (ex: <a href="https://azure.microsoft.com/fr-fr/overview/azure-stack/">Azure Stack</a>,
<a href="https://aws.amazon.com/fr/outposts/">AWS Outposts</a>).</li>
  <li>Chiffrer les données</li>
  <li>Répliquer/Sauvegarder les données soit sur plusieurs fournisseurs Cloud, soit en interne</li>
  <li>Vérifier la politique et l’historique du fournisseur sur ce sujet</li>
  <li>Ne pas stocker les données les plus sensibles sur le Cloud</li>
</ul>

<ol>
  <li>R2 - User Identity Federation</li>
</ol>

<p>Plusieurs fournisseurs d’identité peuvent être utilisés pour authentifier un utilisateur. Pour les 
applications grand public, il n’est pas rare de voir des boutons comme “Connecter avec Facebook”, Microsoft
ou Goole.</p>

<p>L’entreprise doit être en mesure de fédérer et de contrôler ces différentes identités.</p>

<ol>
  <li>R3- Regulatory Compliance</li>
</ol>

<p>Les lois sont différentes entre les pays. L’exemple le plus flagrant est la gestion de la vie privée (privacy).
Entre l’Europe et RGPD et les Etats-Unis, le lien est compliqué. 
Quelle est la legislation qui s’applique alors? Celle du pays du fournisseur? De la localisation de son datacenter?
De l’entreprise qui utilise le Cloud? Celle de l’utilisateur?
Different regulatory laws across countries or regions</p>

<ol>
  <li>R4 - Business Continuity and Resiliency</li>
</ol>

<p>Que se passe-t’il en cas de panne? Le Cloud n’est pas forcément fiable à 100%:</p>
<ul>
  <li><a href="https://status.azure.com/en-us/status/history/">Azure Status History</a></li>
  <li><a href="https://status.aws.amazon.com/">AWS Service Health</a></li>
</ul>

<p>Les pannes peuvent aller jusqu’à la <a href="https://aws.amazon.com/message/41926/">perte d’un datacenter</a>.
Il convient donc de concevoir l’application avec cet état de fait en tête.
Il faut aussi adapter le PRA/PCA au Cloud et les tester.
Un bon élève dans le domaine est <a href="https://github.com/Netflix/SimianArmy">NetFlix et son armée de singes</a>
qui a automatisé le test de son plan de reprise.</p>

<ol>
  <li>R5 - User Privacy and Secondary Usage of Data</li>
</ol>

<p>Le fait de s’appuyer sur le Cloud induit un tiers. Celui-ci peut, pour ses besoins, capter des informations
d’usage, notamment sur les utilisateurs de nos applications.</p>

<p>Il convient donc de s’assurer du respect de la vie privée affiché par le fournisseur.</p>

<ol>
  <li>R6 - Service and Data Integration</li>
</ol>

<p>Les données sont stockées dans le Cloud. Pour des applications  interne (RH, Marketing…), ces informations
circulent sur Internet et peuvent être interceptées.</p>

<p>Une protection des données en transit doit être mis en place (VPN, HTTPS…).</p>

<ol>
  <li>R7 - Multi Tenancy and Physical Security</li>
</ol>

<p>Le fournisseur de Cloud met à disposition des ressources partagées entre plusieurs clients (tenants).
Ce partage de ressources présente un risque sur la disponibilité (CPU, bande passante pour le réseau…)
mais aussi sur la confidentialité (attaque par canal caché).</p>

<p>L’isolation doit donc être validée.</p>

<ol>
  <li>R8 - Incidence Analysis and Forensic Support</li>
</ol>

<p>Pour de nombreuses applications, les ressources utilisées sont gérées (managées) par le fournisseur.
Traditionnellement, les machines attaquées étaient isolées puis analysées pour comprendre l’attaque,
la contrer et potentiellement, identifier l’attaquant.</p>

<p>Avec le Cloud, il n’est pas forcément possible d’avoir un accès en direct. De plus, entre la 
détection et l’action, l’instance a pu être recyclée.</p>

<p>Les logs doivent être normalement déversées dans un “log sink” (AWS CloudWatch, Azure Monitor).
Dans une architecture micro-service, ils doivent aussi être conçus de manière à recréer l’historique
des évènements.</p>

<ol>
  <li>R9 - Infrastructure Security</li>
</ol>

<p>Pour un Cloud type IaaS, les bonnes pratiques d’infrastructures doivent déployées:</p>
<ul>
  <li>Systèmes “sécurisés par défaut” et renforcés (hardened): configurations sécurisées à l’installation, désactivation des services inutiles, anti-virus, produits applicatifs à jour…</li>
  <li>Bonnes pratiques d’Architecture réseau : isolation des environnements, filtrage et contrôle des flux…</li>
  <li>Contrôle des accès admin</li>
</ul>

<ol>
  <li>R10 - Non Production Environment Exposure</li>
</ol>

<p>Afin de réduire la surface d’attaque, les environnements hors-production (développement, qualification…)
ne doivent pas être accessibles par tous.</p>

<h2 id="csa-top-threat-to-cloud-computing">CSA Top Threat to Cloud Computing</h2>

<p>La “Cloud Security Alliance” propose une liste: <a href="https://cloudsecurityalliance.org/download/artifacts/top-threats-to-cloud-computing-egregious-eleven/">The Egregious 11</a>.</p>

<ol>
  <li>Data Breaches</li>
  <li>Misconfiguration and Inadequate Change Control</li>
  <li>Lack of Cloud Security Architecture and Strategy</li>
  <li>Insufficient Identity, Credential, Access and Key Management</li>
  <li>Account Hijacking</li>
  <li>Insider Threat</li>
  <li>Insecure Interfaces and API</li>
  <li>Weak Control Plane</li>
  <li>Metastructure and Applistructure Failures</li>
  <li>Limited Cloud Usage Visibility</li>
  <li>Abuse and Nefarious Use of Cloud Services</li>
</ol>

<h2 id="analyse-des-différents-top-10">Analyse des différents Top 10</h2>

<p>Ces deux listes mettent en avant plusieurs risques qu’il faut peser lors du choix d’un fournisseur.</p>

<ul>
  <li>Le Cloud permet de donner une bonne assurance sur la disponibilité. Cependant, le Cloud publique présente malgré tout un risque en cas de conflit.</li>
  <li>Comment assurer la confidentialité et l’intégrité des données stockées dans le Cloud? Doit-on s’appuyer sur les solutions de chiffrement des données du Cloud ou utiliser ces propres outils?</li>
  <li>Le contrôle d’accès est essentiel et doit être assurer par un processus cohérent.</li>
  <li>Un mauvaise usage du Cloud entraîne facilement une exposition inutile des services. Il faut contrôler la surface d’attaque qui est offerte.</li>
  <li>La supervision doit fonctionner de manière efficace.</li>
</ul>

<h1 id="architecture-pour-le-cloud">Architecture pour le Cloud</h1>

<p>Pour définir une architecture pour le Cloud, il est bon d’avoir des principes pour nous guider.
Nous allons nous intéresser aux principes de design pour construire une application sécurisée.
Ces principes possèdent plusieurs propriétés intéressantes:</p>

<ul>
  <li>Ils sont peu nombreux (&lt; 20)</li>
  <li>Ils sont simples à comprendre et à retenir</li>
  <li>Ce sont des principes de haut-niveau, indépendant de l’implémentation</li>
  <li>Ils adressent des problèmes fondamentaux dans la sécurité</li>
  <li>Ils sont “fractales”, c’est-à-dire qu’on peut les retrouver et les appliquer à tous les niveaux, de la conception en passant par l’architecture jusqu’au code.</li>
</ul>

<p>Puis, nous verrons les solutions offertes par le Cloud et comment traduire nos choix en solutions concrètes</p>

<h2 id="secure-by-design">Secure by Design</h2>

<p>En 1975,  Jerome Saltzer et Michael Schroeder ont proposé dans leur article intitulé <em>“The Protection of Information in Computer Systems”</em> plusieurs principes de design pour construire une application sécurisée:</p>

<table>
  <thead>
    <tr>
      <th>Principes</th>
      <th>Description</th>
      <th>Applications au niveau de l’architecture</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>Economy of mechanism</strong></td>
      <td>Un design simple est facile à tester et à valider. Moins il y a, plus la surface d’attaque est réduite. On pourrait rapprocher ce principe de <a href="https://en.wikipedia.org/wiki/KISS_principle">KISS</a>.</td>
      <td>Réduire les serveurs au minimum,</td>
    </tr>
    <tr>
      <td><strong>Fail-safe defaults</strong></td>
      <td>Par défaut, en cas d’erreur, le système ne doit pas se retrouver dans un état non sécurisé. La gestion des d’erreurs est un point important.</td>
      <td> </td>
    </tr>
    <tr>
      <td><strong>Complete mediation</strong></td>
      <td>L’authenticité (et l’authentification), l’intégrité et l’autorisation doivent être vérifiées à chaque fois qu’une requête est effectuée. Les droits d’accès sont entièrement revalidés à chaque accès. Ce genre de principe nous prémunit de failles telles que <a href="https://github.com/OWASP/API-Security/raw/develop/2019/en/dist/owasp-api-security-top-10.pdf">IODR/Broken Object Level Authorization</a></td>
      <td> </td>
    </tr>
    <tr>
      <td><strong>Open design</strong></td>
      <td>L’obfuscation seule ne sert à rien. Le design doit pouvoir être revu et justifié. Cela rejoint le <a href="https://en.wikipedia.org/wiki/Kerckhoffs%27s_principle#Origins">deuxième principe de Kerchoffs</a>.</td>
      <td>Le schéma d’architecture ou les fichiers servant à l’Infra as Code peuvent être publiés sans risque.</td>
    </tr>
    <tr>
      <td><strong>Separation of privilege</strong></td>
      <td>Le principe est d’empêcher qu’un décision prise soit validée par la même personne. Cela permet de renforcer la fiabilité d’un système en ayant un contrôle sur les actions d’un seul individu. Le principe est renommé en <a href="https://en.wikipedia.org/wiki/Separation_of_duties">“Separation of duties” ou “Segregation of duties”</a>.</td>
      <td>Définition de niveaux d’isolation (tenant, VNet, subnet, …), Gestion des droits d’accès, …</td>
    </tr>
    <tr>
      <td><strong>Least privilege</strong></td>
      <td>est-ce qu’un simple utilisateur devrait avoir les droits d’administration pour se connecter à une application? A-t’on besoin de faire tourner une application en root sur un serveur? A-t’on besoin de travailler en tant qu’administrateur sur son poste?</td>
      <td> </td>
    </tr>
    <tr>
      <td><strong>Least common mechanism</strong></td>
      <td>Les utilisateurs ne devraient pas partager les mêmes outils, sauf si c’est indispensable. Ex: même câble pour le réseau, même PC, … (accès à des fichiers partagés, …).</td>
      <td>Par conception, ce principe est mis à mal par le Cloud où les ressources sont fortement partagées. On cherchera à ne pas partager des ressources comme des VMs entre projets.</td>
    </tr>
    <tr>
      <td><strong>Psychological acceptability</strong></td>
      <td>Si la sécurité est trop compliquée, les utilisateurs trouveront un moyen de la contourner.</td>
      <td>Si l’accès au Cloud est trop compliqué, on s’expose à ce que les utilisateurs face du <a href="https://en.wikipedia.org/wiki/Shadow_IT">“Shadow IT”</a></td>
    </tr>
    <tr>
      <td><strong>Work factor</strong></td>
      <td>L’effort à fournir par l’attaquant pour rentrer dans le système doit être important. Gros mots de passe, …</td>
      <td> </td>
    </tr>
    <tr>
      <td><strong>Compromise recording</strong></td>
      <td>Le système devrait conserver une trace de toutes les attaques même si elles n’ont pas été bloquées. Indispensable pour l’analyse d’incident.</td>
      <td>Utilisation de solutions “Log Sink” telles que Azure Monitor ou AWS CloudWatch.</td>
    </tr>
  </tbody>
</table>

<p>En 2009, Saltzer et Kaashoek ont complété cette liste dans <a href="https://ocw.mit.edu/resources/res-6-004-principles-of-computer-system-design-an-introduction-spring-2009/online-textbook/principles_open_5_0.pdf"><em>“Principles of Computer System Design”</em></a> avec d’autres principes:</p>

<table>
  <thead>
    <tr>
      <th>Principes</th>
      <th>Description</th>
      <th>Applications au niveau de l’architecture</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>Minimize secrets</strong></td>
      <td>Parce qu’il y a une chance que le secret puisse être découvert, en changer doit être facile. Là encore, on rejoint le troisième principe de Kerchoff (<em>“correspondents must be able to change or modify [the key] at will”</em>). On parle alors de rotation des secrets</td>
      <td>PKI as a Service, Vault, <a href="https://www.12factor.net/config">Store config in environment</a></td>
    </tr>
    <tr>
      <td>Least astonishment</td>
      <td>Ne réinventez pas la roue. Vos choix doivent être en cohérence avec l’état de l’art, les attentes et l’expérience des utilisateurs, …</td>
      <td>Il est important de s’appuyer sur des guides d’architecture pour constuire son système (<a href="https://docs.microsoft.com/fr-fr/azure/architecture/guide/">Azure</a>, <a href="https://aws.amazon.com/fr/architecture/">AWS</a>, <a href="https://www.paloaltonetworks.com/resources/guides/gcp-architecture-guide">GCP</a> )</td>
    </tr>
    <tr>
      <td>Design for iteration</td>
      <td>L’architecture ne sera sans doute pas parfaite du premier coup, concevez-là en prenant en compte ce principe pour faire en sorte que les changements soient faciles</td>
      <td>L’amélioration continue appliquée à l’architecture. On s’interessera aux architectures micro-services ou aux notions <a href="https://www.thoughtworks.com/books/building-evolutionary-architectures">“evolutionary architectures”</a>.</td>
    </tr>
  </tbody>
</table>

<p>D’autres principes importants peuvent aussi être gardés en mémoire:</p>

<table>
  <thead>
    <tr>
      <th>Principes</th>
      <th>Description</th>
      <th>Applications au niveau de l’architecture</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>Defense in depth</strong></td>
      <td>C’est un principe de sécurité important. Plusieurs couches se compensent et se complètent les unes les autres.</td>
      <td>Sur une architecture, on mettre en place deux firewalls de constructeurs différents, un WAF, une isolation avec des sous-réseaux, une validation des failles avec un sAST…</td>
    </tr>
    <tr>
      <td><strong>Deny by default</strong></td>
      <td>Par défaut, toute actions est refusée. On ouvre les droits de manière parcimonieuse</td>
      <td>Toutes les API doivent être sécurisées</td>
    </tr>
  </tbody>
</table>

<p>L’OWASP propose aussi une liste complète de <a href="https://www.owasp.org/index.php/Security_by_Design_Principles">10 principes pour la sécurité par design</a>. On retiendra:
| Principes                          | Description | Applications au niveau de l’architecture
| —                                |             |
| <strong>Minimize attack surface</strong>        | Réduire la surface que l’attaquant peut utiliser au minimum | Fermeture des ports, renforcement des machines, …
| <strong>Fix security issues correctly</strong>  | Tout problème doit être rapidement corrigé | Mettre en place des systèmes de détection telles que <a href="https://en.wikipedia.org/wiki/Nessus_(software)">Nessus</a> ou <a href="http://www.openvas.org/">OpenVAS</a></p>

<h2 id="exemples-de-solution-avec-azure">Exemples de solution avec Azure</h2>

<p>La liste suivante est non exhaustive et soumise aux changements rapides du Cloud.
Elle est organisée selon les différentes couches du modèle OSI:</p>

<ul>
  <li>Level 3: NSG, IP Filtering (App Service), VPN, Bastion, Network Watcher</li>
  <li>Level 4: NSG, NSG DDoS Protection, Firewall</li>
  <li>Level 5: Application Gateway TLS</li>
  <li>Level 7: APG WAF, Advanced SQL Threat detection</li>
</ul>

<h2 id="exemple-darchitecture">Exemple d’architecture</h2>

<p>Le schéma suivant est tiré de <a href="https://docs.microsoft.com/en-us/azure/architecture/reference-architectures/dmz/secure-vnet-dmz">“Implement a DMZ between Azure and the Internet”</a>.</p>

<figure><img class="docimage" src="images/azure-architecture-dmz.png" alt="" /><figcaption>Schéma d'architecture</figcaption></figure>

<p>On retrouve ainsi:</p>

<ul>
  <li>La présence de plusieurs zones pour isoler et limiter l’impact en cas de compromission.</li>
  <li>Les flux sont clairement indiqués. Il est possible de limiter les accès via des subnets ou les NSG.</li>
</ul>

<h1 id="resources">Resources</h1>

<ul>
  <li><a href="https://nostarch.com/azure">“Pentesting Azure Applications, The Definitive Guide to Testing and Securing Deployments”</a>, Matt Burrough, No Starch Press, 2017</li>
</ul>


    <div class="tags">
        
        <b>Tags: </b>
        
        
        
        
        
    </div>



    <div id="disqus_thread"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'appsec-hitema'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>




</div>

<hr class="shaded"/>

<footer>
            <div class="row">
                <div class="col-lg-12 footer">
               &copy;2019 , Licence : CC BY-SA 3.0 FR.  <br />
<span>Page last updated:</span> July 3, 2016<br/> Site last generated: Dec 19, 2019 <br />
<p><img src="images/hitema.png" alt="Company logo"/></p>
                </div>
            </div>
</footer>


        </div>
    <!-- /.row -->
</div>
<!-- /.container -->
</div>
<!-- /#main -->
    </div>

</body>

</html>
